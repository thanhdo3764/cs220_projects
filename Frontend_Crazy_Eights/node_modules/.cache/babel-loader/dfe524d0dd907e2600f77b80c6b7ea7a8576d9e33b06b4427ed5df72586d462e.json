{"ast":null,"code":"/*\n * readlineSync\n * https://github.com/anseki/readline-sync\n *\n * Copyright (c) 2019 anseki\n * Licensed under the MIT license.\n */\n\n'use strict';\n\nvar IS_WIN = process.platform === 'win32',\n  ALGORITHM_CIPHER = 'aes-256-cbc',\n  ALGORITHM_HASH = 'sha256',\n  DEFAULT_ERR_MSG = 'The current environment doesn\\'t support interactive reading from TTY.',\n  fs = require('fs'),\n  TTY = process.binding('tty_wrap').TTY,\n  childProc = require('child_process'),\n  pathUtil = require('path'),\n  defaultOptions = {\n    /* eslint-disable key-spacing */\n    prompt: '> ',\n    hideEchoBack: false,\n    mask: '*',\n    limit: [],\n    limitMessage: 'Input another, please.$<( [)limit(])>',\n    defaultInput: '',\n    trueValue: [],\n    falseValue: [],\n    caseSensitive: false,\n    keepWhitespace: false,\n    encoding: 'utf8',\n    bufferSize: 1024,\n    print: void 0,\n    history: true,\n    cd: false,\n    phContent: void 0,\n    preCheck: void 0\n    /* eslint-enable key-spacing */\n  },\n  fdR = 'none',\n  isRawMode = false,\n  salt = 0,\n  lastInput = '',\n  inputHistory = [],\n  _DBG_useExt = false,\n  _DBG_checkOptions = false,\n  _DBG_checkMethod = false,\n  fdW,\n  ttyR,\n  extHostPath,\n  extHostArgs,\n  tempdir,\n  rawInput;\nfunction getHostArgs(options) {\n  // Send any text to crazy Windows shell safely.\n  function encodeArg(arg) {\n    return arg.replace(/[^\\w\\u0080-\\uFFFF]/g, function (chr) {\n      return '#' + chr.charCodeAt(0) + ';';\n    });\n  }\n  return extHostArgs.concat(function (conf) {\n    var args = [];\n    Object.keys(conf).forEach(function (optionName) {\n      if (conf[optionName] === 'boolean') {\n        if (options[optionName]) {\n          args.push('--' + optionName);\n        }\n      } else if (conf[optionName] === 'string') {\n        if (options[optionName]) {\n          args.push('--' + optionName, encodeArg(options[optionName]));\n        }\n      }\n    });\n    return args;\n  }({\n    /* eslint-disable key-spacing */\n    display: 'string',\n    displayOnly: 'boolean',\n    keyIn: 'boolean',\n    hideEchoBack: 'boolean',\n    mask: 'string',\n    limit: 'string',\n    caseSensitive: 'boolean'\n    /* eslint-enable key-spacing */\n  }));\n}\n\n// piping via files (for Node.js v0.10-)\nfunction _execFileSync(options, execOptions) {\n  function getTempfile(name) {\n    var suffix = '',\n      filepath,\n      fd;\n    tempdir = tempdir || require('os').tmpdir();\n    while (true) {\n      filepath = pathUtil.join(tempdir, name + suffix);\n      try {\n        fd = fs.openSync(filepath, 'wx');\n      } catch (e) {\n        if (e.code === 'EEXIST') {\n          suffix++;\n          continue;\n        } else {\n          throw e;\n        }\n      }\n      fs.closeSync(fd);\n      break;\n    }\n    return filepath;\n  }\n  var res = {},\n    pathStdout = getTempfile('readline-sync.stdout'),\n    pathStderr = getTempfile('readline-sync.stderr'),\n    pathExit = getTempfile('readline-sync.exit'),\n    pathDone = getTempfile('readline-sync.done'),\n    crypto = require('crypto'),\n    hostArgs,\n    shellPath,\n    shellArgs,\n    exitCode,\n    extMessage,\n    shasum,\n    decipher,\n    password;\n  shasum = crypto.createHash(ALGORITHM_HASH);\n  shasum.update('' + process.pid + salt++ + Math.random());\n  password = shasum.digest('hex');\n  decipher = crypto.createDecipher(ALGORITHM_CIPHER, password);\n  hostArgs = getHostArgs(options);\n  if (IS_WIN) {\n    shellPath = process.env.ComSpec || 'cmd.exe';\n    process.env.Q = '\"'; // The quote (\") that isn't escaped.\n    // `()` for ignore space by echo\n    shellArgs = ['/V:ON', '/S', '/C', '(%Q%' + shellPath + '%Q% /V:ON /S /C %Q%' + /* ESLint bug? */ // eslint-disable-line no-path-concat\n    '%Q%' + extHostPath + '%Q%' + hostArgs.map(function (arg) {\n      return ' %Q%' + arg + '%Q%';\n    }).join('') + ' & (echo !ERRORLEVEL!)>%Q%' + pathExit + '%Q%%Q%) 2>%Q%' + pathStderr + '%Q%' + ' |%Q%' + process.execPath + '%Q% %Q%' + __dirname + '\\\\encrypt.js%Q%' + ' %Q%' + ALGORITHM_CIPHER + '%Q% %Q%' + password + '%Q%' + ' >%Q%' + pathStdout + '%Q%' + ' & (echo 1)>%Q%' + pathDone + '%Q%'];\n  } else {\n    shellPath = '/bin/sh';\n    shellArgs = ['-c',\n    // Use `()`, not `{}` for `-c` (text param)\n    '(\"' + extHostPath + '\"' + /* ESLint bug? */ // eslint-disable-line no-path-concat\n    hostArgs.map(function (arg) {\n      return \" '\" + arg.replace(/'/g, \"'\\\\''\") + \"'\";\n    }).join('') + '; echo $?>\"' + pathExit + '\") 2>\"' + pathStderr + '\"' + ' |\"' + process.execPath + '\" \"' + __dirname + '/encrypt.js\"' + ' \"' + ALGORITHM_CIPHER + '\" \"' + password + '\"' + ' >\"' + pathStdout + '\"' + '; echo 1 >\"' + pathDone + '\"'];\n  }\n  if (_DBG_checkMethod) {\n    _DBG_checkMethod('_execFileSync', hostArgs);\n  }\n  try {\n    childProc.spawn(shellPath, shellArgs, execOptions);\n  } catch (e) {\n    res.error = new Error(e.message);\n    res.error.method = '_execFileSync - spawn';\n    res.error.program = shellPath;\n    res.error.args = shellArgs;\n  }\n  while (fs.readFileSync(pathDone, {\n    encoding: options.encoding\n  }).trim() !== '1') {} // eslint-disable-line no-empty\n  if ((exitCode = fs.readFileSync(pathExit, {\n    encoding: options.encoding\n  }).trim()) === '0') {\n    res.input = decipher.update(fs.readFileSync(pathStdout, {\n      encoding: 'binary'\n    }), 'hex', options.encoding) + decipher.final(options.encoding);\n  } else {\n    extMessage = fs.readFileSync(pathStderr, {\n      encoding: options.encoding\n    }).trim();\n    res.error = new Error(DEFAULT_ERR_MSG + (extMessage ? '\\n' + extMessage : ''));\n    res.error.method = '_execFileSync';\n    res.error.program = shellPath;\n    res.error.args = shellArgs;\n    res.error.extMessage = extMessage;\n    res.error.exitCode = +exitCode;\n  }\n  fs.unlinkSync(pathStdout);\n  fs.unlinkSync(pathStderr);\n  fs.unlinkSync(pathExit);\n  fs.unlinkSync(pathDone);\n  return res;\n}\nfunction readlineExt(options) {\n  var res = {},\n    execOptions = {\n      env: process.env,\n      encoding: options.encoding\n    },\n    hostArgs,\n    extMessage;\n  if (!extHostPath) {\n    if (IS_WIN) {\n      if (process.env.PSModulePath) {\n        // Windows PowerShell\n        extHostPath = 'powershell.exe';\n        extHostArgs = ['-ExecutionPolicy', 'Bypass', '-File', __dirname + '\\\\read.ps1']; // eslint-disable-line no-path-concat\n      } else {\n        // Windows Script Host\n        extHostPath = 'cscript.exe';\n        extHostArgs = ['//nologo', __dirname + '\\\\read.cs.js']; // eslint-disable-line no-path-concat\n      }\n    } else {\n      extHostPath = '/bin/sh';\n      extHostArgs = [__dirname + '/read.sh']; // eslint-disable-line no-path-concat\n    }\n  }\n  if (IS_WIN && !process.env.PSModulePath) {\n    // Windows Script Host\n    // ScriptPW (Win XP and Server2003) needs TTY stream as STDIN.\n    // In this case, If STDIN isn't TTY, an error is thrown.\n    execOptions.stdio = [process.stdin];\n  }\n  if (childProc.execFileSync) {\n    hostArgs = getHostArgs(options);\n    if (_DBG_checkMethod) {\n      _DBG_checkMethod('execFileSync', hostArgs);\n    }\n    try {\n      res.input = childProc.execFileSync(extHostPath, hostArgs, execOptions);\n    } catch (e) {\n      // non-zero exit code\n      extMessage = e.stderr ? (e.stderr + '').trim() : '';\n      res.error = new Error(DEFAULT_ERR_MSG + (extMessage ? '\\n' + extMessage : ''));\n      res.error.method = 'execFileSync';\n      res.error.program = extHostPath;\n      res.error.args = hostArgs;\n      res.error.extMessage = extMessage;\n      res.error.exitCode = e.status;\n      res.error.code = e.code;\n      res.error.signal = e.signal;\n    }\n  } else {\n    res = _execFileSync(options, execOptions);\n  }\n  if (!res.error) {\n    res.input = res.input.replace(/^\\s*'|'\\s*$/g, '');\n    options.display = '';\n  }\n  return res;\n}\n\n/*\n  display:            string\n  displayOnly:        boolean\n  keyIn:              boolean\n  hideEchoBack:       boolean\n  mask:               string\n  limit:              string (pattern)\n  caseSensitive:      boolean\n  keepWhitespace:     boolean\n  encoding, bufferSize, print\n*/\nfunction _readlineSync(options) {\n  var input = '',\n    displaySave = options.display,\n    silent = !options.display && options.keyIn && options.hideEchoBack && !options.mask;\n  function tryExt() {\n    var res = readlineExt(options);\n    if (res.error) {\n      throw res.error;\n    }\n    return res.input;\n  }\n  if (_DBG_checkOptions) {\n    _DBG_checkOptions(options);\n  }\n  (function () {\n    // open TTY\n    var fsB, constants, verNum;\n    function getFsB() {\n      if (!fsB) {\n        fsB = process.binding('fs'); // For raw device path\n        constants = process.binding('constants');\n        // for v6.3.0+\n        constants = constants && constants.fs && typeof constants.fs.O_RDWR === 'number' ? constants.fs : constants;\n      }\n      return fsB;\n    }\n    if (typeof fdR !== 'string') {\n      return;\n    }\n    fdR = null;\n    if (IS_WIN) {\n      // iojs-v2.3.2+ input stream can't read first line. (#18)\n      // ** Don't get process.stdin before check! **\n      // Fixed v5.1.0\n      // Fixed v4.2.4\n      // It regressed again in v5.6.0, it is fixed in v6.2.0.\n      verNum = function (ver) {\n        // getVerNum\n        var nums = ver.replace(/^\\D+/, '').split('.');\n        var verNum = 0;\n        if (nums[0] = +nums[0]) {\n          verNum += nums[0] * 10000;\n        }\n        if (nums[1] = +nums[1]) {\n          verNum += nums[1] * 100;\n        }\n        if (nums[2] = +nums[2]) {\n          verNum += nums[2];\n        }\n        return verNum;\n      }(process.version);\n      if (!(verNum >= 20302 && verNum < 40204 || verNum >= 50000 && verNum < 50100 || verNum >= 50600 && verNum < 60200) && process.stdin.isTTY) {\n        process.stdin.pause();\n        fdR = process.stdin.fd;\n        ttyR = process.stdin._handle;\n      } else {\n        try {\n          // The stream by fs.openSync('\\\\\\\\.\\\\CON', 'r') can't switch to raw mode.\n          // 'CONIN$' might fail on XP, 2000, 7 (x86).\n          fdR = getFsB().open('CONIN$', constants.O_RDWR, parseInt('0666', 8));\n          ttyR = new TTY(fdR, true);\n        } catch (e) {/* ignore */}\n      }\n      if (process.stdout.isTTY) {\n        fdW = process.stdout.fd;\n      } else {\n        try {\n          fdW = fs.openSync('\\\\\\\\.\\\\CON', 'w');\n        } catch (e) {/* ignore */}\n        if (typeof fdW !== 'number') {\n          // Retry\n          try {\n            fdW = getFsB().open('CONOUT$', constants.O_RDWR, parseInt('0666', 8));\n          } catch (e) {/* ignore */}\n        }\n      }\n    } else {\n      if (process.stdin.isTTY) {\n        process.stdin.pause();\n        try {\n          fdR = fs.openSync('/dev/tty', 'r'); // device file, not process.stdin\n          ttyR = process.stdin._handle;\n        } catch (e) {/* ignore */}\n      } else {\n        // Node.js v0.12 read() fails.\n        try {\n          fdR = fs.openSync('/dev/tty', 'r');\n          ttyR = new TTY(fdR, false);\n        } catch (e) {/* ignore */}\n      }\n      if (process.stdout.isTTY) {\n        fdW = process.stdout.fd;\n      } else {\n        try {\n          fdW = fs.openSync('/dev/tty', 'w');\n        } catch (e) {/* ignore */}\n      }\n    }\n  })();\n  (function () {\n    // try read\n    var isCooked = !options.hideEchoBack && !options.keyIn,\n      atEol,\n      limit,\n      buffer,\n      reqSize,\n      readSize,\n      chunk,\n      line;\n    rawInput = '';\n\n    // Node.js v0.10- returns an error if same mode is set.\n    function setRawMode(mode) {\n      if (mode === isRawMode) {\n        return true;\n      }\n      if (ttyR.setRawMode(mode) !== 0) {\n        return false;\n      }\n      isRawMode = mode;\n      return true;\n    }\n    if (_DBG_useExt || !ttyR || typeof fdW !== 'number' && (options.display || !isCooked)) {\n      input = tryExt();\n      return;\n    }\n    if (options.display) {\n      fs.writeSync(fdW, options.display);\n      options.display = '';\n    }\n    if (options.displayOnly) {\n      return;\n    }\n    if (!setRawMode(!isCooked)) {\n      input = tryExt();\n      return;\n    }\n    reqSize = options.keyIn ? 1 : options.bufferSize;\n    // Check `allocUnsafe` to make sure of the new API.\n    buffer = Buffer.allocUnsafe && Buffer.alloc ? Buffer.alloc(reqSize) : new Buffer(reqSize);\n    if (options.keyIn && options.limit) {\n      limit = new RegExp('[^' + options.limit + ']', 'g' + (options.caseSensitive ? '' : 'i'));\n    }\n    while (true) {\n      readSize = 0;\n      try {\n        readSize = fs.readSync(fdR, buffer, 0, reqSize);\n      } catch (e) {\n        if (e.code !== 'EOF') {\n          setRawMode(false);\n          input += tryExt();\n          return;\n        }\n      }\n      if (readSize > 0) {\n        chunk = buffer.toString(options.encoding, 0, readSize);\n        rawInput += chunk;\n      } else {\n        chunk = '\\n';\n        rawInput += String.fromCharCode(0);\n      }\n      if (chunk && typeof (line = (chunk.match(/^(.*?)[\\r\\n]/) || [])[1]) === 'string') {\n        chunk = line;\n        atEol = true;\n      }\n\n      // other ctrl-chars\n      // eslint-disable-next-line no-control-regex\n      if (chunk) {\n        chunk = chunk.replace(/[\\x00-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]/g, '');\n      }\n      if (chunk && limit) {\n        chunk = chunk.replace(limit, '');\n      }\n      if (chunk) {\n        if (!isCooked) {\n          if (!options.hideEchoBack) {\n            fs.writeSync(fdW, chunk);\n          } else if (options.mask) {\n            fs.writeSync(fdW, new Array(chunk.length + 1).join(options.mask));\n          }\n        }\n        input += chunk;\n      }\n      if (!options.keyIn && atEol || options.keyIn && input.length >= reqSize) {\n        break;\n      }\n    }\n    if (!isCooked && !silent) {\n      fs.writeSync(fdW, '\\n');\n    }\n    setRawMode(false);\n  })();\n  if (options.print && !silent) {\n    options.print(displaySave + (options.displayOnly ? '' : (options.hideEchoBack ? new Array(input.length + 1).join(options.mask) : input) + '\\n' // must at least write '\\n'\n    ), options.encoding);\n  }\n  return options.displayOnly ? '' : lastInput = options.keepWhitespace || options.keyIn ? input : input.trim();\n}\nfunction flattenArray(array, validator) {\n  var flatArray = [];\n  function _flattenArray(array) {\n    if (array == null) {\n      return;\n    }\n    if (Array.isArray(array)) {\n      array.forEach(_flattenArray);\n    } else if (!validator || validator(array)) {\n      flatArray.push(array);\n    }\n  }\n  _flattenArray(array);\n  return flatArray;\n}\nfunction escapePattern(pattern) {\n  return pattern.replace(/[\\x00-\\x7f]/g,\n  // eslint-disable-line no-control-regex\n  function (s) {\n    return '\\\\x' + ('00' + s.charCodeAt().toString(16)).substr(-2);\n  });\n}\n\n// margeOptions(options1, options2 ... )\n// margeOptions(true, options1, options2 ... )\n//    arg1=true : Start from defaultOptions and pick elements of that.\nfunction margeOptions() {\n  var optionsList = Array.prototype.slice.call(arguments),\n    optionNames,\n    fromDefault;\n  if (optionsList.length && typeof optionsList[0] === 'boolean') {\n    fromDefault = optionsList.shift();\n    if (fromDefault) {\n      optionNames = Object.keys(defaultOptions);\n      optionsList.unshift(defaultOptions);\n    }\n  }\n  return optionsList.reduce(function (options, optionsPart) {\n    if (optionsPart == null) {\n      return options;\n    }\n\n    // ======== DEPRECATED ========\n    if (optionsPart.hasOwnProperty('noEchoBack') && !optionsPart.hasOwnProperty('hideEchoBack')) {\n      optionsPart.hideEchoBack = optionsPart.noEchoBack;\n      delete optionsPart.noEchoBack;\n    }\n    if (optionsPart.hasOwnProperty('noTrim') && !optionsPart.hasOwnProperty('keepWhitespace')) {\n      optionsPart.keepWhitespace = optionsPart.noTrim;\n      delete optionsPart.noTrim;\n    }\n    // ======== /DEPRECATED ========\n\n    if (!fromDefault) {\n      optionNames = Object.keys(optionsPart);\n    }\n    optionNames.forEach(function (optionName) {\n      var value;\n      if (!optionsPart.hasOwnProperty(optionName)) {\n        return;\n      }\n      value = optionsPart[optionName];\n      /* eslint-disable no-multi-spaces */\n      switch (optionName) {\n        //                    _readlineSync <- *    * -> defaultOptions\n        // ================ string\n        case 'mask': // *    *\n        case 'limitMessage': //      *\n        case 'defaultInput': //      *\n        case 'encoding':\n          // *    *\n          value = value != null ? value + '' : '';\n          if (value && optionName !== 'limitMessage') {\n            value = value.replace(/[\\r\\n]/g, '');\n          }\n          options[optionName] = value;\n          break;\n        // ================ number(int)\n        case 'bufferSize':\n          // *    *\n          if (!isNaN(value = parseInt(value, 10)) && typeof value === 'number') {\n            options[optionName] = value; // limited updating (number is needed)\n          }\n          break;\n        // ================ boolean\n        case 'displayOnly': // *\n        case 'keyIn': // *\n        case 'hideEchoBack': // *    *\n        case 'caseSensitive': // *    *\n        case 'keepWhitespace': // *    *\n        case 'history': //      *\n        case 'cd':\n          //      *\n          options[optionName] = !!value;\n          break;\n        // ================ array\n        case 'limit': // *    *     to string for readlineExt\n        case 'trueValue': //      *\n        case 'falseValue':\n          //      *\n          options[optionName] = flattenArray(value, function (value) {\n            var type = typeof value;\n            return type === 'string' || type === 'number' || type === 'function' || value instanceof RegExp;\n          }).map(function (value) {\n            return typeof value === 'string' ? value.replace(/[\\r\\n]/g, '') : value;\n          });\n          break;\n        // ================ function\n        case 'print': // *    *\n        case 'phContent': //      *\n        case 'preCheck':\n          //      *\n          options[optionName] = typeof value === 'function' ? value : void 0;\n          break;\n        // ================ other\n        case 'prompt': //      *\n        case 'display':\n          // *\n          options[optionName] = value != null ? value : '';\n          break;\n        // no default\n      }\n      /* eslint-enable no-multi-spaces */\n    });\n    return options;\n  }, {});\n}\nfunction isMatched(res, comps, caseSensitive) {\n  return comps.some(function (comp) {\n    var type = typeof comp;\n    return type === 'string' ? caseSensitive ? res === comp : res.toLowerCase() === comp.toLowerCase() : type === 'number' ? parseFloat(res) === comp : type === 'function' ? comp(res) : comp instanceof RegExp ? comp.test(res) : false;\n  });\n}\nfunction replaceHomePath(path, expand) {\n  var homePath = pathUtil.normalize(IS_WIN ? (process.env.HOMEDRIVE || '') + (process.env.HOMEPATH || '') : process.env.HOME || '').replace(/[/\\\\]+$/, '');\n  path = pathUtil.normalize(path);\n  return expand ? path.replace(/^~(?=\\/|\\\\|$)/, homePath) : path.replace(new RegExp('^' + escapePattern(homePath) + '(?=\\\\/|\\\\\\\\|$)', IS_WIN ? 'i' : ''), '~');\n}\nfunction replacePlaceholder(text, generator) {\n  var PTN_INNER = '(?:\\\\(([\\\\s\\\\S]*?)\\\\))?(\\\\w+|.-.)(?:\\\\(([\\\\s\\\\S]*?)\\\\))?',\n    rePlaceholder = new RegExp('(\\\\$)?(\\\\$<' + PTN_INNER + '>)', 'g'),\n    rePlaceholderCompat = new RegExp('(\\\\$)?(\\\\$\\\\{' + PTN_INNER + '\\\\})', 'g');\n  function getPlaceholderText(s, escape, placeholder, pre, param, post) {\n    var text;\n    return escape || typeof (text = generator(param)) !== 'string' ? placeholder : text ? (pre || '') + text + (post || '') : '';\n  }\n  return text.replace(rePlaceholder, getPlaceholderText).replace(rePlaceholderCompat, getPlaceholderText);\n}\nfunction array2charlist(array, caseSensitive, collectSymbols) {\n  var group = [],\n    groupClass = -1,\n    charCode = 0,\n    symbols = '',\n    values,\n    suppressed;\n  function addGroup(groups, group) {\n    if (group.length > 3) {\n      // ellipsis\n      groups.push(group[0] + '...' + group[group.length - 1]);\n      suppressed = true;\n    } else if (group.length) {\n      groups = groups.concat(group);\n    }\n    return groups;\n  }\n  values = array.reduce(function (chars, value) {\n    return chars.concat((value + '').split(''));\n  }, []).reduce(function (groups, curChar) {\n    var curGroupClass, curCharCode;\n    if (!caseSensitive) {\n      curChar = curChar.toLowerCase();\n    }\n    curGroupClass = /^\\d$/.test(curChar) ? 1 : /^[A-Z]$/.test(curChar) ? 2 : /^[a-z]$/.test(curChar) ? 3 : 0;\n    if (collectSymbols && curGroupClass === 0) {\n      symbols += curChar;\n    } else {\n      curCharCode = curChar.charCodeAt(0);\n      if (curGroupClass && curGroupClass === groupClass && curCharCode === charCode + 1) {\n        group.push(curChar);\n      } else {\n        groups = addGroup(groups, group);\n        group = [curChar];\n        groupClass = curGroupClass;\n      }\n      charCode = curCharCode;\n    }\n    return groups;\n  }, []);\n  values = addGroup(values, group); // last group\n  if (symbols) {\n    values.push(symbols);\n    suppressed = true;\n  }\n  return {\n    values: values,\n    suppressed: suppressed\n  };\n}\nfunction joinChunks(chunks, suppressed) {\n  return chunks.join(chunks.length > 2 ? ', ' : suppressed ? ' / ' : '/');\n}\nfunction getPhContent(param, options) {\n  var resCharlist = {},\n    text,\n    values,\n    arg;\n  if (options.phContent) {\n    text = options.phContent(param, options);\n  }\n  if (typeof text !== 'string') {\n    switch (param) {\n      case 'hideEchoBack':\n      case 'mask':\n      case 'defaultInput':\n      case 'caseSensitive':\n      case 'keepWhitespace':\n      case 'encoding':\n      case 'bufferSize':\n      case 'history':\n      case 'cd':\n        text = !options.hasOwnProperty(param) ? '' : typeof options[param] === 'boolean' ? options[param] ? 'on' : 'off' : options[param] + '';\n        break;\n      // case 'prompt':\n      // case 'query':\n      // case 'display':\n      //   text = options.hasOwnProperty('displaySrc') ? options.displaySrc + '' : '';\n      //   break;\n      case 'limit':\n      case 'trueValue':\n      case 'falseValue':\n        values = options[options.hasOwnProperty(param + 'Src') ? param + 'Src' : param];\n        if (options.keyIn) {\n          // suppress\n          resCharlist = array2charlist(values, options.caseSensitive);\n          values = resCharlist.values;\n        } else {\n          values = values.filter(function (value) {\n            var type = typeof value;\n            return type === 'string' || type === 'number';\n          });\n        }\n        text = joinChunks(values, resCharlist.suppressed);\n        break;\n      case 'limitCount':\n      case 'limitCountNotZero':\n        text = options[options.hasOwnProperty('limitSrc') ? 'limitSrc' : 'limit'].length;\n        text = text || param !== 'limitCountNotZero' ? text + '' : '';\n        break;\n      case 'lastInput':\n        text = lastInput;\n        break;\n      case 'cwd':\n      case 'CWD':\n      case 'cwdHome':\n        text = process.cwd();\n        if (param === 'CWD') {\n          text = pathUtil.basename(text);\n        } else if (param === 'cwdHome') {\n          text = replaceHomePath(text);\n        }\n        break;\n      case 'date':\n      case 'time':\n      case 'localeDate':\n      case 'localeTime':\n        text = new Date()['to' + param.replace(/^./, function (str) {\n          return str.toUpperCase();\n        }) + 'String']();\n        break;\n      default:\n        // with arg\n        if (typeof (arg = (param.match(/^history_m(\\d+)$/) || [])[1]) === 'string') {\n          text = inputHistory[inputHistory.length - arg] || '';\n        }\n    }\n  }\n  return text;\n}\nfunction getPhCharlist(param) {\n  var matches = /^(.)-(.)$/.exec(param),\n    text = '',\n    from,\n    to,\n    code,\n    step;\n  if (!matches) {\n    return null;\n  }\n  from = matches[1].charCodeAt(0);\n  to = matches[2].charCodeAt(0);\n  step = from < to ? 1 : -1;\n  for (code = from; code !== to + step; code += step) {\n    text += String.fromCharCode(code);\n  }\n  return text;\n}\n\n// cmd \"arg\" \" a r g \" \"\" 'a\"r\"g' \"a\"\"rg\" \"arg\nfunction parseCl(cl) {\n  var reToken = new RegExp(/(\\s*)(?:(\"|')(.*?)(?:\\2|$)|(\\S+))/g),\n    taken = '',\n    args = [],\n    matches,\n    part;\n  cl = cl.trim();\n  while (matches = reToken.exec(cl)) {\n    part = matches[3] || matches[4] || '';\n    if (matches[1]) {\n      args.push(taken);\n      taken = '';\n    }\n    taken += part;\n  }\n  if (taken) {\n    args.push(taken);\n  }\n  return args;\n}\nfunction toBool(res, options) {\n  return options.trueValue.length && isMatched(res, options.trueValue, options.caseSensitive) ? true : options.falseValue.length && isMatched(res, options.falseValue, options.caseSensitive) ? false : res;\n}\nfunction getValidLine(options) {\n  var res, forceNext, limitMessage, matches, histInput, args, resCheck;\n  function _getPhContent(param) {\n    return getPhContent(param, options);\n  }\n  function addDisplay(text) {\n    options.display += (/[^\\r\\n]$/.test(options.display) ? '\\n' : '') + text;\n  }\n  options.limitSrc = options.limit;\n  options.displaySrc = options.display;\n  options.limit = ''; // for readlineExt\n  options.display = replacePlaceholder(options.display + '', _getPhContent);\n  while (true) {\n    res = _readlineSync(options);\n    forceNext = false;\n    limitMessage = '';\n    if (options.defaultInput && !res) {\n      res = options.defaultInput;\n    }\n    if (options.history) {\n      if (matches = /^\\s*!(?:!|-1)(:p)?\\s*$/.exec(res)) {\n        // `!!` `!-1` +`:p`\n        histInput = inputHistory[0] || '';\n        if (matches[1]) {\n          // only display\n          forceNext = true;\n        } else {\n          // replace input\n          res = histInput;\n        }\n        // Show it even if it is empty (NL only).\n        addDisplay(histInput + '\\n');\n        if (!forceNext) {\n          // Loop may break\n          options.displayOnly = true;\n          _readlineSync(options);\n          options.displayOnly = false;\n        }\n      } else if (res && res !== inputHistory[inputHistory.length - 1]) {\n        inputHistory = [res];\n      }\n    }\n    if (!forceNext && options.cd && res) {\n      args = parseCl(res);\n      switch (args[0].toLowerCase()) {\n        case 'cd':\n          if (args[1]) {\n            try {\n              process.chdir(replaceHomePath(args[1], true));\n            } catch (e) {\n              addDisplay(e + '');\n            }\n          }\n          forceNext = true;\n          break;\n        case 'pwd':\n          addDisplay(process.cwd());\n          forceNext = true;\n          break;\n        // no default\n      }\n    }\n    if (!forceNext && options.preCheck) {\n      resCheck = options.preCheck(res, options);\n      res = resCheck.res;\n      if (resCheck.forceNext) {\n        forceNext = true;\n      } // Don't switch to false.\n    }\n    if (!forceNext) {\n      if (!options.limitSrc.length || isMatched(res, options.limitSrc, options.caseSensitive)) {\n        break;\n      }\n      if (options.limitMessage) {\n        limitMessage = replacePlaceholder(options.limitMessage, _getPhContent);\n      }\n    }\n    addDisplay((limitMessage ? limitMessage + '\\n' : '') + replacePlaceholder(options.displaySrc + '', _getPhContent));\n  }\n  return toBool(res, options);\n}\n\n// for dev\nexports._DBG_set_useExt = function (val) {\n  _DBG_useExt = val;\n};\nexports._DBG_set_checkOptions = function (val) {\n  _DBG_checkOptions = val;\n};\nexports._DBG_set_checkMethod = function (val) {\n  _DBG_checkMethod = val;\n};\nexports._DBG_clearHistory = function () {\n  lastInput = '';\n  inputHistory = [];\n};\n\n// ------------------------------------\n\nexports.setDefaultOptions = function (options) {\n  defaultOptions = margeOptions(true, options);\n  return margeOptions(true); // copy\n};\nexports.question = function (query, options) {\n  /* eslint-disable key-spacing */\n  return getValidLine(margeOptions(margeOptions(true, options), {\n    display: query\n  }));\n  /* eslint-enable key-spacing */\n};\nexports.prompt = function (options) {\n  var readOptions = margeOptions(true, options);\n  readOptions.display = readOptions.prompt;\n  return getValidLine(readOptions);\n};\nexports.keyIn = function (query, options) {\n  /* eslint-disable key-spacing */\n  var readOptions = margeOptions(margeOptions(true, options), {\n    display: query,\n    keyIn: true,\n    keepWhitespace: true\n  });\n  /* eslint-enable key-spacing */\n\n  // char list\n  readOptions.limitSrc = readOptions.limit.filter(function (value) {\n    var type = typeof value;\n    return type === 'string' || type === 'number';\n  }).map(function (text) {\n    return replacePlaceholder(text + '', getPhCharlist);\n  });\n  // pattern\n  readOptions.limit = escapePattern(readOptions.limitSrc.join(''));\n  ['trueValue', 'falseValue'].forEach(function (optionName) {\n    readOptions[optionName] = readOptions[optionName].reduce(function (comps, comp) {\n      var type = typeof comp;\n      if (type === 'string' || type === 'number') {\n        comps = comps.concat((comp + '').split(''));\n      } else {\n        comps.push(comp);\n      }\n      return comps;\n    }, []);\n  });\n  readOptions.display = replacePlaceholder(readOptions.display + '', function (param) {\n    return getPhContent(param, readOptions);\n  });\n  return toBool(_readlineSync(readOptions), readOptions);\n};\n\n// ------------------------------------\n\nexports.questionEMail = function (query, options) {\n  if (query == null) {\n    query = 'Input e-mail address: ';\n  }\n  /* eslint-disable key-spacing */\n  return exports.question(query, margeOptions({\n    // -------- default\n    hideEchoBack: false,\n    // http://www.w3.org/TR/html5/forms.html#valid-e-mail-address\n    limit: /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,\n    limitMessage: 'Input valid e-mail address, please.',\n    trueValue: null,\n    falseValue: null\n  }, options, {\n    // -------- forced\n    keepWhitespace: false,\n    cd: false\n  }));\n  /* eslint-enable key-spacing */\n};\nexports.questionNewPassword = function (query, options) {\n  /* eslint-disable key-spacing */\n  var resCharlist,\n    min,\n    max,\n    readOptions = margeOptions({\n      // -------- default\n      hideEchoBack: true,\n      mask: '*',\n      limitMessage: 'It can include: $<charlist>\\n' + 'And the length must be: $<length>',\n      trueValue: null,\n      falseValue: null,\n      caseSensitive: true\n    }, options, {\n      // -------- forced\n      history: false,\n      cd: false,\n      // limit (by charlist etc.),\n      phContent: function (param) {\n        return param === 'charlist' ? resCharlist.text : param === 'length' ? min + '...' + max : null;\n      }\n    }),\n    // added:     charlist, min, max, confirmMessage, unmatchMessage\n    charlist,\n    confirmMessage,\n    unmatchMessage,\n    limit,\n    limitMessage,\n    res1,\n    res2;\n  /* eslint-enable key-spacing */\n  options = options || {};\n  charlist = replacePlaceholder(options.charlist ? options.charlist + '' : '$<!-~>', getPhCharlist);\n  if (isNaN(min = parseInt(options.min, 10)) || typeof min !== 'number') {\n    min = 12;\n  }\n  if (isNaN(max = parseInt(options.max, 10)) || typeof max !== 'number') {\n    max = 24;\n  }\n  limit = new RegExp('^[' + escapePattern(charlist) + ']{' + min + ',' + max + '}$');\n  resCharlist = array2charlist([charlist], readOptions.caseSensitive, true);\n  resCharlist.text = joinChunks(resCharlist.values, resCharlist.suppressed);\n  confirmMessage = options.confirmMessage != null ? options.confirmMessage : 'Reinput a same one to confirm it: ';\n  unmatchMessage = options.unmatchMessage != null ? options.unmatchMessage : 'It differs from first one.' + ' Hit only the Enter key if you want to retry from first one.';\n  if (query == null) {\n    query = 'Input new password: ';\n  }\n  limitMessage = readOptions.limitMessage;\n  while (!res2) {\n    readOptions.limit = limit;\n    readOptions.limitMessage = limitMessage;\n    res1 = exports.question(query, readOptions);\n    readOptions.limit = [res1, ''];\n    readOptions.limitMessage = unmatchMessage;\n    res2 = exports.question(confirmMessage, readOptions);\n  }\n  return res1;\n};\nfunction _questionNum(query, options, parser) {\n  var validValue;\n  function getValidValue(value) {\n    validValue = parser(value);\n    return !isNaN(validValue) && typeof validValue === 'number';\n  }\n  /* eslint-disable key-spacing */\n  exports.question(query, margeOptions({\n    // -------- default\n    limitMessage: 'Input valid number, please.'\n  }, options, {\n    // -------- forced\n    limit: getValidValue,\n    cd: false\n    // trueValue, falseValue, caseSensitive, keepWhitespace don't work.\n  }));\n  /* eslint-enable key-spacing */\n  return validValue;\n}\nexports.questionInt = function (query, options) {\n  return _questionNum(query, options, function (value) {\n    return parseInt(value, 10);\n  });\n};\nexports.questionFloat = function (query, options) {\n  return _questionNum(query, options, parseFloat);\n};\nexports.questionPath = function (query, options) {\n  /* eslint-disable key-spacing */\n  var error = '',\n    validPath,\n    // before readOptions\n    readOptions = margeOptions({\n      // -------- default\n      hideEchoBack: false,\n      limitMessage: '$<error(\\n)>Input valid path, please.' + '$<( Min:)min>$<( Max:)max>',\n      history: true,\n      cd: true\n    }, options, {\n      // -------- forced\n      keepWhitespace: false,\n      limit: function (value) {\n        var exists, stat, res;\n        value = replaceHomePath(value, true);\n        error = ''; // for validate\n        // mkdir -p\n        function mkdirParents(dirPath) {\n          dirPath.split(/\\/|\\\\/).reduce(function (parents, dir) {\n            var path = pathUtil.resolve(parents += dir + pathUtil.sep);\n            if (!fs.existsSync(path)) {\n              fs.mkdirSync(path);\n            } else if (!fs.statSync(path).isDirectory()) {\n              throw new Error('Non directory already exists: ' + path);\n            }\n            return parents;\n          }, '');\n        }\n        try {\n          exists = fs.existsSync(value);\n          validPath = exists ? fs.realpathSync(value) : pathUtil.resolve(value);\n          // options.exists default: true, not-bool: no-check\n          if (!options.hasOwnProperty('exists') && !exists || typeof options.exists === 'boolean' && options.exists !== exists) {\n            error = (exists ? 'Already exists' : 'No such file or directory') + ': ' + validPath;\n            return false;\n          }\n          if (!exists && options.create) {\n            if (options.isDirectory) {\n              mkdirParents(validPath);\n            } else {\n              mkdirParents(pathUtil.dirname(validPath));\n              fs.closeSync(fs.openSync(validPath, 'w')); // touch\n            }\n            validPath = fs.realpathSync(validPath);\n          }\n          if (exists && (options.min || options.max || options.isFile || options.isDirectory)) {\n            stat = fs.statSync(validPath);\n            // type check first (directory has zero size)\n            if (options.isFile && !stat.isFile()) {\n              error = 'Not file: ' + validPath;\n              return false;\n            } else if (options.isDirectory && !stat.isDirectory()) {\n              error = 'Not directory: ' + validPath;\n              return false;\n            } else if (options.min && stat.size < +options.min || options.max && stat.size > +options.max) {\n              error = 'Size ' + stat.size + ' is out of range: ' + validPath;\n              return false;\n            }\n          }\n          if (typeof options.validate === 'function' && (res = options.validate(validPath)) !== true) {\n            if (typeof res === 'string') {\n              error = res;\n            }\n            return false;\n          }\n        } catch (e) {\n          error = e + '';\n          return false;\n        }\n        return true;\n      },\n      // trueValue, falseValue, caseSensitive don't work.\n      phContent: function (param) {\n        return param === 'error' ? error : param !== 'min' && param !== 'max' ? null : options.hasOwnProperty(param) ? options[param] + '' : '';\n      }\n    });\n  // added:     exists, create, min, max, isFile, isDirectory, validate\n  /* eslint-enable key-spacing */\n  options = options || {};\n  if (query == null) {\n    query = 'Input path (you can \"cd\" and \"pwd\"): ';\n  }\n  exports.question(query, readOptions);\n  return validPath;\n};\n\n// props: preCheck, args, hRes, limit\nfunction getClHandler(commandHandler, options) {\n  var clHandler = {},\n    hIndex = {};\n  if (typeof commandHandler === 'object') {\n    Object.keys(commandHandler).forEach(function (cmd) {\n      if (typeof commandHandler[cmd] === 'function') {\n        hIndex[options.caseSensitive ? cmd : cmd.toLowerCase()] = commandHandler[cmd];\n      }\n    });\n    clHandler.preCheck = function (res) {\n      var cmdKey;\n      clHandler.args = parseCl(res);\n      cmdKey = clHandler.args[0] || '';\n      if (!options.caseSensitive) {\n        cmdKey = cmdKey.toLowerCase();\n      }\n      clHandler.hRes = cmdKey !== '_' && hIndex.hasOwnProperty(cmdKey) ? hIndex[cmdKey].apply(res, clHandler.args.slice(1)) : hIndex.hasOwnProperty('_') ? hIndex._.apply(res, clHandler.args) : null;\n      return {\n        res: res,\n        forceNext: false\n      };\n    };\n    if (!hIndex.hasOwnProperty('_')) {\n      clHandler.limit = function () {\n        // It's called after preCheck.\n        var cmdKey = clHandler.args[0] || '';\n        if (!options.caseSensitive) {\n          cmdKey = cmdKey.toLowerCase();\n        }\n        return hIndex.hasOwnProperty(cmdKey);\n      };\n    }\n  } else {\n    clHandler.preCheck = function (res) {\n      clHandler.args = parseCl(res);\n      clHandler.hRes = typeof commandHandler === 'function' ? commandHandler.apply(res, clHandler.args) : true; // true for break loop\n      return {\n        res: res,\n        forceNext: false\n      };\n    };\n  }\n  return clHandler;\n}\nexports.promptCL = function (commandHandler, options) {\n  /* eslint-disable key-spacing */\n  var readOptions = margeOptions({\n      // -------- default\n      hideEchoBack: false,\n      limitMessage: 'Requested command is not available.',\n      caseSensitive: false,\n      history: true\n    }, options),\n    //   -------- forced\n    //   trueValue, falseValue, keepWhitespace don't work.\n    //   preCheck, limit (by clHandler)\n    clHandler = getClHandler(commandHandler, readOptions);\n  /* eslint-enable key-spacing */\n  readOptions.limit = clHandler.limit;\n  readOptions.preCheck = clHandler.preCheck;\n  exports.prompt(readOptions);\n  return clHandler.args;\n};\nexports.promptLoop = function (inputHandler, options) {\n  /* eslint-disable key-spacing */\n  var readOptions = margeOptions({\n    // -------- default\n    hideEchoBack: false,\n    trueValue: null,\n    falseValue: null,\n    caseSensitive: false,\n    history: true\n  }, options);\n  /* eslint-enable key-spacing */\n  while (true) {\n    if (inputHandler(exports.prompt(readOptions))) {\n      break;\n    }\n  }\n  // return; // nothing is returned\n};\nexports.promptCLLoop = function (commandHandler, options) {\n  /* eslint-disable key-spacing */\n  var readOptions = margeOptions({\n      // -------- default\n      hideEchoBack: false,\n      limitMessage: 'Requested command is not available.',\n      caseSensitive: false,\n      history: true\n    }, options),\n    //   -------- forced\n    //   trueValue, falseValue, keepWhitespace don't work.\n    //   preCheck, limit (by clHandler)\n    clHandler = getClHandler(commandHandler, readOptions);\n  /* eslint-enable key-spacing */\n  readOptions.limit = clHandler.limit;\n  readOptions.preCheck = clHandler.preCheck;\n  while (true) {\n    exports.prompt(readOptions);\n    if (clHandler.hRes) {\n      break;\n    }\n  }\n  // return; // nothing is returned\n};\nexports.promptSimShell = function (options) {\n  /* eslint-disable key-spacing */\n  return exports.prompt(margeOptions({\n    // -------- default\n    hideEchoBack: false,\n    history: true\n  }, options, {\n    // -------- forced\n    prompt: function () {\n      return IS_WIN ? '$<cwd>>' :\n      // 'user@host:cwd$ '\n      (process.env.USER || '') + (process.env.HOSTNAME ? '@' + process.env.HOSTNAME.replace(/\\..*$/, '') : '') + ':$<cwdHome>$ ';\n    }()\n  }));\n  /* eslint-enable key-spacing */\n};\nfunction _keyInYN(query, options, limit) {\n  var res;\n  if (query == null) {\n    query = 'Are you sure? ';\n  }\n  if ((!options || options.guide !== false) && (query += '')) {\n    query = query.replace(/\\s*:?\\s*$/, '') + ' [y/n]: ';\n  }\n  /* eslint-disable key-spacing */\n  res = exports.keyIn(query, margeOptions(options, {\n    // -------- forced\n    hideEchoBack: false,\n    limit: limit,\n    trueValue: 'y',\n    falseValue: 'n',\n    caseSensitive: false\n    // mask doesn't work.\n  }));\n  // added:     guide\n  /* eslint-enable key-spacing */\n  return typeof res === 'boolean' ? res : '';\n}\nexports.keyInYN = function (query, options) {\n  return _keyInYN(query, options);\n};\nexports.keyInYNStrict = function (query, options) {\n  return _keyInYN(query, options, 'yn');\n};\nexports.keyInPause = function (query, options) {\n  if (query == null) {\n    query = 'Continue...';\n  }\n  if ((!options || options.guide !== false) && (query += '')) {\n    query = query.replace(/\\s+$/, '') + ' (Hit any key)';\n  }\n  /* eslint-disable key-spacing */\n  exports.keyIn(query, margeOptions({\n    // -------- default\n    limit: null\n  }, options, {\n    // -------- forced\n    hideEchoBack: true,\n    mask: ''\n  }));\n  // added:     guide\n  /* eslint-enable key-spacing */\n  // return; // nothing is returned\n};\nexports.keyInSelect = function (items, query, options) {\n  /* eslint-disable key-spacing */\n  var readOptions = margeOptions({\n      // -------- default\n      hideEchoBack: false\n    }, options, {\n      // -------- forced\n      trueValue: null,\n      falseValue: null,\n      caseSensitive: false,\n      // limit (by items),\n      phContent: function (param) {\n        return param === 'itemsCount' ? items.length + '' : param === 'firstItem' ? (items[0] + '').trim() : param === 'lastItem' ? (items[items.length - 1] + '').trim() : null;\n      }\n    }),\n    // added:     guide, cancel\n    keylist = '',\n    key2i = {},\n    charCode = 49 /* '1' */,\n    display = '\\n';\n  /* eslint-enable key-spacing */\n  if (!Array.isArray(items) || !items.length || items.length > 35) {\n    throw '`items` must be Array (max length: 35).';\n  }\n  items.forEach(function (item, i) {\n    var key = String.fromCharCode(charCode);\n    keylist += key;\n    key2i[key] = i;\n    display += '[' + key + '] ' + (item + '').trim() + '\\n';\n    charCode = charCode === 57 /* '9' */ ? 97 /* 'a' */ : charCode + 1;\n  });\n  if (!options || options.cancel !== false) {\n    keylist += '0';\n    key2i['0'] = -1;\n    display += '[0] ' + (options && options.cancel != null && typeof options.cancel !== 'boolean' ? (options.cancel + '').trim() : 'CANCEL') + '\\n';\n  }\n  readOptions.limit = keylist;\n  display += '\\n';\n  if (query == null) {\n    query = 'Choose one from list: ';\n  }\n  if (query += '') {\n    if (!options || options.guide !== false) {\n      query = query.replace(/\\s*:?\\s*$/, '') + ' [$<limit>]: ';\n    }\n    display += query;\n  }\n  return key2i[exports.keyIn(display, readOptions).toLowerCase()];\n};\nexports.getRawInput = function () {\n  return rawInput;\n};\n\n// ======== DEPRECATED ========\nfunction _setOption(optionName, args) {\n  var options;\n  if (args.length) {\n    options = {};\n    options[optionName] = args[0];\n  }\n  return exports.setDefaultOptions(options)[optionName];\n}\nexports.setPrint = function () {\n  return _setOption('print', arguments);\n};\nexports.setPrompt = function () {\n  return _setOption('prompt', arguments);\n};\nexports.setEncoding = function () {\n  return _setOption('encoding', arguments);\n};\nexports.setMask = function () {\n  return _setOption('mask', arguments);\n};\nexports.setBufferSize = function () {\n  return _setOption('bufferSize', arguments);\n};","map":{"version":3,"names":["IS_WIN","process","platform","ALGORITHM_CIPHER","ALGORITHM_HASH","DEFAULT_ERR_MSG","fs","require","TTY","binding","childProc","pathUtil","defaultOptions","prompt","hideEchoBack","mask","limit","limitMessage","defaultInput","trueValue","falseValue","caseSensitive","keepWhitespace","encoding","bufferSize","print","history","cd","phContent","preCheck","fdR","isRawMode","salt","lastInput","inputHistory","_DBG_useExt","_DBG_checkOptions","_DBG_checkMethod","fdW","ttyR","extHostPath","extHostArgs","tempdir","rawInput","getHostArgs","options","encodeArg","arg","replace","chr","charCodeAt","concat","conf","args","Object","keys","forEach","optionName","push","display","displayOnly","keyIn","_execFileSync","execOptions","getTempfile","name","suffix","filepath","fd","tmpdir","join","openSync","e","code","closeSync","res","pathStdout","pathStderr","pathExit","pathDone","crypto","hostArgs","shellPath","shellArgs","exitCode","extMessage","shasum","decipher","password","createHash","update","pid","Math","random","digest","createDecipher","env","ComSpec","Q","map","execPath","__dirname","spawn","error","Error","message","method","program","readFileSync","trim","input","final","unlinkSync","readlineExt","PSModulePath","stdio","stdin","execFileSync","stderr","status","signal","_readlineSync","displaySave","silent","tryExt","fsB","constants","verNum","getFsB","O_RDWR","ver","nums","split","version","isTTY","pause","_handle","open","parseInt","stdout","isCooked","atEol","buffer","reqSize","readSize","chunk","line","setRawMode","mode","writeSync","Buffer","allocUnsafe","alloc","RegExp","readSync","toString","String","fromCharCode","match","Array","length","flattenArray","array","validator","flatArray","_flattenArray","isArray","escapePattern","pattern","s","substr","margeOptions","optionsList","prototype","slice","call","arguments","optionNames","fromDefault","shift","unshift","reduce","optionsPart","hasOwnProperty","noEchoBack","noTrim","value","isNaN","type","isMatched","comps","some","comp","toLowerCase","parseFloat","test","replaceHomePath","path","expand","homePath","normalize","HOMEDRIVE","HOMEPATH","HOME","replacePlaceholder","text","generator","PTN_INNER","rePlaceholder","rePlaceholderCompat","getPlaceholderText","escape","placeholder","pre","param","post","array2charlist","collectSymbols","group","groupClass","charCode","symbols","values","suppressed","addGroup","groups","chars","curChar","curGroupClass","curCharCode","joinChunks","chunks","getPhContent","resCharlist","filter","cwd","basename","Date","str","toUpperCase","getPhCharlist","matches","exec","from","to","step","parseCl","cl","reToken","taken","part","toBool","getValidLine","forceNext","histInput","resCheck","_getPhContent","addDisplay","limitSrc","displaySrc","chdir","exports","_DBG_set_useExt","val","_DBG_set_checkOptions","_DBG_set_checkMethod","_DBG_clearHistory","setDefaultOptions","question","query","readOptions","questionEMail","questionNewPassword","min","max","charlist","confirmMessage","unmatchMessage","res1","res2","_questionNum","parser","validValue","getValidValue","questionInt","questionFloat","questionPath","validPath","exists","stat","mkdirParents","dirPath","parents","dir","resolve","sep","existsSync","mkdirSync","statSync","isDirectory","realpathSync","create","dirname","isFile","size","validate","getClHandler","commandHandler","clHandler","hIndex","cmd","cmdKey","hRes","apply","_","promptCL","promptLoop","inputHandler","promptCLLoop","promptSimShell","USER","HOSTNAME","_keyInYN","guide","keyInYN","keyInYNStrict","keyInPause","keyInSelect","items","keylist","key2i","item","i","key","cancel","getRawInput","_setOption","setPrint","setPrompt","setEncoding","setMask","setBufferSize"],"sources":["/Users/thanhdo/WSU/CS224/CS-220-Project1/Frontend_Crazy_Eights/node_modules/readline-sync/lib/readline-sync.js"],"sourcesContent":["/*\n * readlineSync\n * https://github.com/anseki/readline-sync\n *\n * Copyright (c) 2019 anseki\n * Licensed under the MIT license.\n */\n\n'use strict';\n\nvar\n  IS_WIN = process.platform === 'win32',\n\n  ALGORITHM_CIPHER = 'aes-256-cbc',\n  ALGORITHM_HASH = 'sha256',\n  DEFAULT_ERR_MSG = 'The current environment doesn\\'t support interactive reading from TTY.',\n\n  fs = require('fs'),\n  TTY = process.binding('tty_wrap').TTY,\n  childProc = require('child_process'),\n  pathUtil = require('path'),\n\n  defaultOptions = {\n    /* eslint-disable key-spacing */\n    prompt:             '> ',\n    hideEchoBack:       false,\n    mask:               '*',\n    limit:              [],\n    limitMessage:       'Input another, please.$<( [)limit(])>',\n    defaultInput:       '',\n    trueValue:          [],\n    falseValue:         [],\n    caseSensitive:      false,\n    keepWhitespace:     false,\n    encoding:           'utf8',\n    bufferSize:         1024,\n    print:              void 0,\n    history:            true,\n    cd:                 false,\n    phContent:          void 0,\n    preCheck:           void 0\n    /* eslint-enable key-spacing */\n  },\n\n  fdR = 'none',\n  isRawMode = false,\n  salt = 0,\n  lastInput = '',\n  inputHistory = [],\n  _DBG_useExt = false,\n  _DBG_checkOptions = false,\n  _DBG_checkMethod = false,\n  fdW, ttyR, extHostPath, extHostArgs, tempdir, rawInput;\n\nfunction getHostArgs(options) {\n  // Send any text to crazy Windows shell safely.\n  function encodeArg(arg) {\n    return arg.replace(/[^\\w\\u0080-\\uFFFF]/g, function(chr) {\n      return '#' + chr.charCodeAt(0) + ';';\n    });\n  }\n\n  return extHostArgs.concat((function(conf) {\n    var args = [];\n    Object.keys(conf).forEach(function(optionName) {\n      if (conf[optionName] === 'boolean') {\n        if (options[optionName]) { args.push('--' + optionName); }\n      } else if (conf[optionName] === 'string') {\n        if (options[optionName]) {\n          args.push('--' + optionName, encodeArg(options[optionName]));\n        }\n      }\n    });\n    return args;\n  })({\n    /* eslint-disable key-spacing */\n    display:        'string',\n    displayOnly:    'boolean',\n    keyIn:          'boolean',\n    hideEchoBack:   'boolean',\n    mask:           'string',\n    limit:          'string',\n    caseSensitive:  'boolean'\n    /* eslint-enable key-spacing */\n  }));\n}\n\n// piping via files (for Node.js v0.10-)\nfunction _execFileSync(options, execOptions) {\n\n  function getTempfile(name) {\n    var suffix = '',\n      filepath, fd;\n    tempdir = tempdir || require('os').tmpdir();\n\n    while (true) {\n      filepath = pathUtil.join(tempdir, name + suffix);\n      try {\n        fd = fs.openSync(filepath, 'wx');\n      } catch (e) {\n        if (e.code === 'EEXIST') {\n          suffix++;\n          continue;\n        } else {\n          throw e;\n        }\n      }\n      fs.closeSync(fd);\n      break;\n    }\n    return filepath;\n  }\n\n  var res = {},\n    pathStdout = getTempfile('readline-sync.stdout'),\n    pathStderr = getTempfile('readline-sync.stderr'),\n    pathExit = getTempfile('readline-sync.exit'),\n    pathDone = getTempfile('readline-sync.done'),\n    crypto = require('crypto'),\n    hostArgs, shellPath, shellArgs, exitCode, extMessage, shasum, decipher, password;\n\n  shasum = crypto.createHash(ALGORITHM_HASH);\n  shasum.update('' + process.pid + (salt++) + Math.random());\n  password = shasum.digest('hex');\n  decipher = crypto.createDecipher(ALGORITHM_CIPHER, password);\n\n  hostArgs = getHostArgs(options);\n  if (IS_WIN) {\n    shellPath = process.env.ComSpec || 'cmd.exe';\n    process.env.Q = '\"'; // The quote (\") that isn't escaped.\n    // `()` for ignore space by echo\n    shellArgs = ['/V:ON', '/S', '/C',\n      '(%Q%' + shellPath + '%Q% /V:ON /S /C %Q%' + /* ESLint bug? */ // eslint-disable-line no-path-concat\n        '%Q%' + extHostPath + '%Q%' +\n          hostArgs.map(function(arg) { return ' %Q%' + arg + '%Q%'; }).join('') +\n        ' & (echo !ERRORLEVEL!)>%Q%' + pathExit + '%Q%%Q%) 2>%Q%' + pathStderr + '%Q%' +\n      ' |%Q%' + process.execPath + '%Q% %Q%' + __dirname + '\\\\encrypt.js%Q%' +\n        ' %Q%' + ALGORITHM_CIPHER + '%Q% %Q%' + password + '%Q%' +\n        ' >%Q%' + pathStdout + '%Q%' +\n      ' & (echo 1)>%Q%' + pathDone + '%Q%'];\n  } else {\n    shellPath = '/bin/sh';\n    shellArgs = ['-c',\n      // Use `()`, not `{}` for `-c` (text param)\n      '(\"' + extHostPath + '\"' + /* ESLint bug? */ // eslint-disable-line no-path-concat\n          hostArgs.map(function(arg) { return \" '\" + arg.replace(/'/g, \"'\\\\''\") + \"'\"; }).join('') +\n        '; echo $?>\"' + pathExit + '\") 2>\"' + pathStderr + '\"' +\n      ' |\"' + process.execPath + '\" \"' + __dirname + '/encrypt.js\"' +\n        ' \"' + ALGORITHM_CIPHER + '\" \"' + password + '\"' +\n        ' >\"' + pathStdout + '\"' +\n      '; echo 1 >\"' + pathDone + '\"'];\n  }\n  if (_DBG_checkMethod) { _DBG_checkMethod('_execFileSync', hostArgs); }\n  try {\n    childProc.spawn(shellPath, shellArgs, execOptions);\n  } catch (e) {\n    res.error = new Error(e.message);\n    res.error.method = '_execFileSync - spawn';\n    res.error.program = shellPath;\n    res.error.args = shellArgs;\n  }\n\n  while (fs.readFileSync(pathDone, {encoding: options.encoding}).trim() !== '1') {} // eslint-disable-line no-empty\n  if ((exitCode =\n      fs.readFileSync(pathExit, {encoding: options.encoding}).trim()) === '0') {\n    res.input =\n      decipher.update(fs.readFileSync(pathStdout, {encoding: 'binary'}),\n        'hex', options.encoding) +\n      decipher.final(options.encoding);\n  } else {\n    extMessage = fs.readFileSync(pathStderr, {encoding: options.encoding}).trim();\n    res.error = new Error(DEFAULT_ERR_MSG + (extMessage ? '\\n' + extMessage : ''));\n    res.error.method = '_execFileSync';\n    res.error.program = shellPath;\n    res.error.args = shellArgs;\n    res.error.extMessage = extMessage;\n    res.error.exitCode = +exitCode;\n  }\n\n  fs.unlinkSync(pathStdout);\n  fs.unlinkSync(pathStderr);\n  fs.unlinkSync(pathExit);\n  fs.unlinkSync(pathDone);\n\n  return res;\n}\n\nfunction readlineExt(options) {\n  var res = {},\n    execOptions = {env: process.env, encoding: options.encoding},\n    hostArgs, extMessage;\n\n  if (!extHostPath) {\n    if (IS_WIN) {\n      if (process.env.PSModulePath) { // Windows PowerShell\n        extHostPath = 'powershell.exe';\n        extHostArgs = ['-ExecutionPolicy', 'Bypass',\n          '-File', __dirname + '\\\\read.ps1']; // eslint-disable-line no-path-concat\n      } else { // Windows Script Host\n        extHostPath = 'cscript.exe';\n        extHostArgs = ['//nologo', __dirname + '\\\\read.cs.js']; // eslint-disable-line no-path-concat\n      }\n    } else {\n      extHostPath = '/bin/sh';\n      extHostArgs = [__dirname + '/read.sh']; // eslint-disable-line no-path-concat\n    }\n  }\n  if (IS_WIN && !process.env.PSModulePath) { // Windows Script Host\n    // ScriptPW (Win XP and Server2003) needs TTY stream as STDIN.\n    // In this case, If STDIN isn't TTY, an error is thrown.\n    execOptions.stdio = [process.stdin];\n  }\n\n  if (childProc.execFileSync) {\n    hostArgs = getHostArgs(options);\n    if (_DBG_checkMethod) { _DBG_checkMethod('execFileSync', hostArgs); }\n    try {\n      res.input = childProc.execFileSync(extHostPath, hostArgs, execOptions);\n    } catch (e) { // non-zero exit code\n      extMessage = e.stderr ? (e.stderr + '').trim() : '';\n      res.error = new Error(DEFAULT_ERR_MSG + (extMessage ? '\\n' + extMessage : ''));\n      res.error.method = 'execFileSync';\n      res.error.program = extHostPath;\n      res.error.args = hostArgs;\n      res.error.extMessage = extMessage;\n      res.error.exitCode = e.status;\n      res.error.code = e.code;\n      res.error.signal = e.signal;\n    }\n  } else {\n    res = _execFileSync(options, execOptions);\n  }\n  if (!res.error) {\n    res.input = res.input.replace(/^\\s*'|'\\s*$/g, '');\n    options.display = '';\n  }\n\n  return res;\n}\n\n/*\n  display:            string\n  displayOnly:        boolean\n  keyIn:              boolean\n  hideEchoBack:       boolean\n  mask:               string\n  limit:              string (pattern)\n  caseSensitive:      boolean\n  keepWhitespace:     boolean\n  encoding, bufferSize, print\n*/\nfunction _readlineSync(options) {\n  var input = '',\n    displaySave = options.display,\n    silent = !options.display && options.keyIn && options.hideEchoBack && !options.mask;\n\n  function tryExt() {\n    var res = readlineExt(options);\n    if (res.error) { throw res.error; }\n    return res.input;\n  }\n\n  if (_DBG_checkOptions) { _DBG_checkOptions(options); }\n\n  (function() { // open TTY\n    var fsB, constants, verNum;\n\n    function getFsB() {\n      if (!fsB) {\n        fsB = process.binding('fs'); // For raw device path\n        constants = process.binding('constants');\n        // for v6.3.0+\n        constants = constants && constants.fs && typeof constants.fs.O_RDWR === 'number'\n          ? constants.fs : constants;\n      }\n      return fsB;\n    }\n\n    if (typeof fdR !== 'string') { return; }\n    fdR = null;\n\n    if (IS_WIN) {\n      // iojs-v2.3.2+ input stream can't read first line. (#18)\n      // ** Don't get process.stdin before check! **\n      // Fixed v5.1.0\n      // Fixed v4.2.4\n      // It regressed again in v5.6.0, it is fixed in v6.2.0.\n      verNum = (function(ver) { // getVerNum\n        var nums = ver.replace(/^\\D+/, '').split('.');\n        var verNum = 0;\n        if ((nums[0] = +nums[0])) { verNum += nums[0] * 10000; }\n        if ((nums[1] = +nums[1])) { verNum += nums[1] * 100; }\n        if ((nums[2] = +nums[2])) { verNum += nums[2]; }\n        return verNum;\n      })(process.version);\n      if (!(verNum >= 20302 && verNum < 40204 || verNum >= 50000 && verNum < 50100 || verNum >= 50600 && verNum < 60200) &&\n          process.stdin.isTTY) {\n        process.stdin.pause();\n        fdR = process.stdin.fd;\n        ttyR = process.stdin._handle;\n      } else {\n        try {\n          // The stream by fs.openSync('\\\\\\\\.\\\\CON', 'r') can't switch to raw mode.\n          // 'CONIN$' might fail on XP, 2000, 7 (x86).\n          fdR = getFsB().open('CONIN$', constants.O_RDWR, parseInt('0666', 8));\n          ttyR = new TTY(fdR, true);\n        } catch (e) { /* ignore */ }\n      }\n\n      if (process.stdout.isTTY) {\n        fdW = process.stdout.fd;\n      } else {\n        try {\n          fdW = fs.openSync('\\\\\\\\.\\\\CON', 'w');\n        } catch (e) { /* ignore */ }\n        if (typeof fdW !== 'number') { // Retry\n          try {\n            fdW = getFsB().open('CONOUT$', constants.O_RDWR, parseInt('0666', 8));\n          } catch (e) { /* ignore */ }\n        }\n      }\n\n    } else {\n      if (process.stdin.isTTY) {\n        process.stdin.pause();\n        try {\n          fdR = fs.openSync('/dev/tty', 'r'); // device file, not process.stdin\n          ttyR = process.stdin._handle;\n        } catch (e) { /* ignore */ }\n      } else {\n        // Node.js v0.12 read() fails.\n        try {\n          fdR = fs.openSync('/dev/tty', 'r');\n          ttyR = new TTY(fdR, false);\n        } catch (e) { /* ignore */ }\n      }\n\n      if (process.stdout.isTTY) {\n        fdW = process.stdout.fd;\n      } else {\n        try {\n          fdW = fs.openSync('/dev/tty', 'w');\n        } catch (e) { /* ignore */ }\n      }\n    }\n  })();\n\n  (function() { // try read\n    var isCooked = !options.hideEchoBack && !options.keyIn,\n      atEol, limit, buffer, reqSize, readSize, chunk, line;\n    rawInput = '';\n\n    // Node.js v0.10- returns an error if same mode is set.\n    function setRawMode(mode) {\n      if (mode === isRawMode) { return true; }\n      if (ttyR.setRawMode(mode) !== 0) { return false; }\n      isRawMode = mode;\n      return true;\n    }\n\n    if (_DBG_useExt || !ttyR ||\n        typeof fdW !== 'number' && (options.display || !isCooked)) {\n      input = tryExt();\n      return;\n    }\n\n    if (options.display) {\n      fs.writeSync(fdW, options.display);\n      options.display = '';\n    }\n    if (options.displayOnly) { return; }\n\n    if (!setRawMode(!isCooked)) {\n      input = tryExt();\n      return;\n    }\n\n    reqSize = options.keyIn ? 1 : options.bufferSize;\n    // Check `allocUnsafe` to make sure of the new API.\n    buffer = Buffer.allocUnsafe && Buffer.alloc ? Buffer.alloc(reqSize) : new Buffer(reqSize);\n\n    if (options.keyIn && options.limit) {\n      limit = new RegExp('[^' + options.limit + ']',\n        'g' + (options.caseSensitive ? '' : 'i'));\n    }\n\n    while (true) {\n      readSize = 0;\n      try {\n        readSize = fs.readSync(fdR, buffer, 0, reqSize);\n      } catch (e) {\n        if (e.code !== 'EOF') {\n          setRawMode(false);\n          input += tryExt();\n          return;\n        }\n      }\n      if (readSize > 0) {\n        chunk = buffer.toString(options.encoding, 0, readSize);\n        rawInput += chunk;\n      } else {\n        chunk = '\\n';\n        rawInput += String.fromCharCode(0);\n      }\n\n      if (chunk && typeof (line = (chunk.match(/^(.*?)[\\r\\n]/) || [])[1]) === 'string') {\n        chunk = line;\n        atEol = true;\n      }\n\n      // other ctrl-chars\n      // eslint-disable-next-line no-control-regex\n      if (chunk) { chunk = chunk.replace(/[\\x00-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]/g, ''); }\n      if (chunk && limit) { chunk = chunk.replace(limit, ''); }\n\n      if (chunk) {\n        if (!isCooked) {\n          if (!options.hideEchoBack) {\n            fs.writeSync(fdW, chunk);\n          } else if (options.mask) {\n            fs.writeSync(fdW, (new Array(chunk.length + 1)).join(options.mask));\n          }\n        }\n        input += chunk;\n      }\n\n      if (!options.keyIn && atEol ||\n        options.keyIn && input.length >= reqSize) { break; }\n    }\n\n    if (!isCooked && !silent) { fs.writeSync(fdW, '\\n'); }\n    setRawMode(false);\n  })();\n\n  if (options.print && !silent) {\n    options.print(\n      displaySave + (\n        options.displayOnly ? '' : (\n          options.hideEchoBack ? (new Array(input.length + 1)).join(options.mask) : input\n        ) + '\\n' // must at least write '\\n'\n      ),\n      options.encoding);\n  }\n\n  return options.displayOnly ? '' :\n    (lastInput = options.keepWhitespace || options.keyIn ? input : input.trim());\n}\n\nfunction flattenArray(array, validator) {\n  var flatArray = [];\n  function _flattenArray(array) {\n    if (array == null) { return; }\n    if (Array.isArray(array)) {\n      array.forEach(_flattenArray);\n    } else if (!validator || validator(array)) {\n      flatArray.push(array);\n    }\n  }\n  _flattenArray(array);\n  return flatArray;\n}\n\nfunction escapePattern(pattern) {\n  return pattern.replace(/[\\x00-\\x7f]/g, // eslint-disable-line no-control-regex\n    function(s) { return '\\\\x' + ('00' + s.charCodeAt().toString(16)).substr(-2); });\n}\n\n// margeOptions(options1, options2 ... )\n// margeOptions(true, options1, options2 ... )\n//    arg1=true : Start from defaultOptions and pick elements of that.\nfunction margeOptions() {\n  var optionsList = Array.prototype.slice.call(arguments),\n    optionNames, fromDefault;\n\n  if (optionsList.length && typeof optionsList[0] === 'boolean') {\n    fromDefault = optionsList.shift();\n    if (fromDefault) {\n      optionNames = Object.keys(defaultOptions);\n      optionsList.unshift(defaultOptions);\n    }\n  }\n\n  return optionsList.reduce(function(options, optionsPart) {\n    if (optionsPart == null) { return options; }\n\n    // ======== DEPRECATED ========\n    if (optionsPart.hasOwnProperty('noEchoBack') &&\n        !optionsPart.hasOwnProperty('hideEchoBack')) {\n      optionsPart.hideEchoBack = optionsPart.noEchoBack;\n      delete optionsPart.noEchoBack;\n    }\n    if (optionsPart.hasOwnProperty('noTrim') &&\n        !optionsPart.hasOwnProperty('keepWhitespace')) {\n      optionsPart.keepWhitespace = optionsPart.noTrim;\n      delete optionsPart.noTrim;\n    }\n    // ======== /DEPRECATED ========\n\n    if (!fromDefault) { optionNames = Object.keys(optionsPart); }\n    optionNames.forEach(function(optionName) {\n      var value;\n      if (!optionsPart.hasOwnProperty(optionName)) { return; }\n      value = optionsPart[optionName];\n      /* eslint-disable no-multi-spaces */\n      switch (optionName) {\n        //                    _readlineSync <- *    * -> defaultOptions\n        // ================ string\n        case 'mask':                        // *    *\n        case 'limitMessage':                //      *\n        case 'defaultInput':                //      *\n        case 'encoding':                    // *    *\n          value = value != null ? value + '' : '';\n          if (value && optionName !== 'limitMessage') { value = value.replace(/[\\r\\n]/g, ''); }\n          options[optionName] = value;\n          break;\n        // ================ number(int)\n        case 'bufferSize':                  // *    *\n          if (!isNaN(value = parseInt(value, 10)) && typeof value === 'number') {\n            options[optionName] = value; // limited updating (number is needed)\n          }\n          break;\n        // ================ boolean\n        case 'displayOnly':                 // *\n        case 'keyIn':                       // *\n        case 'hideEchoBack':                // *    *\n        case 'caseSensitive':               // *    *\n        case 'keepWhitespace':              // *    *\n        case 'history':                     //      *\n        case 'cd':                          //      *\n          options[optionName] = !!value;\n          break;\n        // ================ array\n        case 'limit':                       // *    *     to string for readlineExt\n        case 'trueValue':                   //      *\n        case 'falseValue':                  //      *\n          options[optionName] = flattenArray(value, function(value) {\n            var type = typeof value;\n            return type === 'string' || type === 'number' ||\n              type === 'function' || value instanceof RegExp;\n          }).map(function(value) {\n            return typeof value === 'string' ? value.replace(/[\\r\\n]/g, '') : value;\n          });\n          break;\n        // ================ function\n        case 'print':                       // *    *\n        case 'phContent':                   //      *\n        case 'preCheck':                    //      *\n          options[optionName] = typeof value === 'function' ? value : void 0;\n          break;\n        // ================ other\n        case 'prompt':                      //      *\n        case 'display':                     // *\n          options[optionName] = value != null ? value : '';\n          break;\n        // no default\n      }\n      /* eslint-enable no-multi-spaces */\n    });\n    return options;\n  }, {});\n}\n\nfunction isMatched(res, comps, caseSensitive) {\n  return comps.some(function(comp) {\n    var type = typeof comp;\n    return type === 'string'\n      ? (caseSensitive ? res === comp : res.toLowerCase() === comp.toLowerCase()) :\n      type === 'number' ? parseFloat(res) === comp :\n      type === 'function' ? comp(res) :\n      comp instanceof RegExp ? comp.test(res) : false;\n  });\n}\n\nfunction replaceHomePath(path, expand) {\n  var homePath = pathUtil.normalize(\n    IS_WIN ? (process.env.HOMEDRIVE || '') + (process.env.HOMEPATH || '') :\n    process.env.HOME || '').replace(/[/\\\\]+$/, '');\n  path = pathUtil.normalize(path);\n  return expand ? path.replace(/^~(?=\\/|\\\\|$)/, homePath) :\n    path.replace(new RegExp('^' + escapePattern(homePath) +\n      '(?=\\\\/|\\\\\\\\|$)', IS_WIN ? 'i' : ''), '~');\n}\n\nfunction replacePlaceholder(text, generator) {\n  var PTN_INNER = '(?:\\\\(([\\\\s\\\\S]*?)\\\\))?(\\\\w+|.-.)(?:\\\\(([\\\\s\\\\S]*?)\\\\))?',\n    rePlaceholder = new RegExp('(\\\\$)?(\\\\$<' + PTN_INNER + '>)', 'g'),\n    rePlaceholderCompat = new RegExp('(\\\\$)?(\\\\$\\\\{' + PTN_INNER + '\\\\})', 'g');\n\n  function getPlaceholderText(s, escape, placeholder, pre, param, post) {\n    var text;\n    return escape || typeof (text = generator(param)) !== 'string' ? placeholder :\n      text ? (pre || '') + text + (post || '') : '';\n  }\n\n  return text.replace(rePlaceholder, getPlaceholderText)\n    .replace(rePlaceholderCompat, getPlaceholderText);\n}\n\nfunction array2charlist(array, caseSensitive, collectSymbols) {\n  var group = [],\n    groupClass = -1,\n    charCode = 0,\n    symbols = '',\n    values, suppressed;\n  function addGroup(groups, group) {\n    if (group.length > 3) { // ellipsis\n      groups.push(group[0] + '...' + group[group.length - 1]);\n      suppressed = true;\n    } else if (group.length) {\n      groups = groups.concat(group);\n    }\n    return groups;\n  }\n\n  values = array.reduce(function(chars, value) {\n    return chars.concat((value + '').split(''));\n  }, []).reduce(function(groups, curChar) {\n    var curGroupClass, curCharCode;\n    if (!caseSensitive) { curChar = curChar.toLowerCase(); }\n    curGroupClass = /^\\d$/.test(curChar) ? 1 :\n      /^[A-Z]$/.test(curChar) ? 2 : /^[a-z]$/.test(curChar) ? 3 : 0;\n    if (collectSymbols && curGroupClass === 0) {\n      symbols += curChar;\n    } else {\n      curCharCode = curChar.charCodeAt(0);\n      if (curGroupClass && curGroupClass === groupClass &&\n          curCharCode === charCode + 1) {\n        group.push(curChar);\n      } else {\n        groups = addGroup(groups, group);\n        group = [curChar];\n        groupClass = curGroupClass;\n      }\n      charCode = curCharCode;\n    }\n    return groups;\n  }, []);\n  values = addGroup(values, group); // last group\n  if (symbols) { values.push(symbols); suppressed = true; }\n  return {values: values, suppressed: suppressed};\n}\n\nfunction joinChunks(chunks, suppressed) {\n  return chunks.join(chunks.length > 2 ? ', ' : suppressed ? ' / ' : '/');\n}\n\nfunction getPhContent(param, options) {\n  var resCharlist = {},\n    text, values, arg;\n  if (options.phContent) {\n    text = options.phContent(param, options);\n  }\n  if (typeof text !== 'string') {\n    switch (param) {\n      case 'hideEchoBack':\n      case 'mask':\n      case 'defaultInput':\n      case 'caseSensitive':\n      case 'keepWhitespace':\n      case 'encoding':\n      case 'bufferSize':\n      case 'history':\n      case 'cd':\n        text = !options.hasOwnProperty(param) ? '' :\n          typeof options[param] === 'boolean' ? (options[param] ? 'on' : 'off') :\n          options[param] + '';\n        break;\n      // case 'prompt':\n      // case 'query':\n      // case 'display':\n      //   text = options.hasOwnProperty('displaySrc') ? options.displaySrc + '' : '';\n      //   break;\n      case 'limit':\n      case 'trueValue':\n      case 'falseValue':\n        values = options[options.hasOwnProperty(param + 'Src') ? param + 'Src' : param];\n        if (options.keyIn) { // suppress\n          resCharlist = array2charlist(values, options.caseSensitive);\n          values = resCharlist.values;\n        } else {\n          values = values.filter(function(value) {\n            var type = typeof value;\n            return type === 'string' || type === 'number';\n          });\n        }\n        text = joinChunks(values, resCharlist.suppressed);\n        break;\n      case 'limitCount':\n      case 'limitCountNotZero':\n        text = options[options.hasOwnProperty('limitSrc') ? 'limitSrc' : 'limit'].length;\n        text = text || param !== 'limitCountNotZero' ? text + '' : '';\n        break;\n      case 'lastInput':\n        text = lastInput;\n        break;\n      case 'cwd':\n      case 'CWD':\n      case 'cwdHome':\n        text = process.cwd();\n        if (param === 'CWD') {\n          text = pathUtil.basename(text);\n        } else if (param === 'cwdHome') {\n          text = replaceHomePath(text);\n        }\n        break;\n      case 'date':\n      case 'time':\n      case 'localeDate':\n      case 'localeTime':\n        text = (new Date())['to' +\n          param.replace(/^./, function(str) { return str.toUpperCase(); }) +\n          'String']();\n        break;\n      default: // with arg\n        if (typeof (arg = (param.match(/^history_m(\\d+)$/) || [])[1]) === 'string') {\n          text = inputHistory[inputHistory.length - arg] || '';\n        }\n    }\n  }\n  return text;\n}\n\nfunction getPhCharlist(param) {\n  var matches = /^(.)-(.)$/.exec(param),\n    text = '',\n    from, to, code, step;\n  if (!matches) { return null; }\n  from = matches[1].charCodeAt(0);\n  to = matches[2].charCodeAt(0);\n  step = from < to ? 1 : -1;\n  for (code = from; code !== to + step; code += step) { text += String.fromCharCode(code); }\n  return text;\n}\n\n// cmd \"arg\" \" a r g \" \"\" 'a\"r\"g' \"a\"\"rg\" \"arg\nfunction parseCl(cl) {\n  var reToken = new RegExp(/(\\s*)(?:(\"|')(.*?)(?:\\2|$)|(\\S+))/g),\n    taken = '',\n    args = [],\n    matches, part;\n  cl = cl.trim();\n  while ((matches = reToken.exec(cl))) {\n    part = matches[3] || matches[4] || '';\n    if (matches[1]) {\n      args.push(taken);\n      taken = '';\n    }\n    taken += part;\n  }\n  if (taken) { args.push(taken); }\n  return args;\n}\n\nfunction toBool(res, options) {\n  return (\n    (options.trueValue.length &&\n      isMatched(res, options.trueValue, options.caseSensitive)) ? true :\n    (options.falseValue.length &&\n      isMatched(res, options.falseValue, options.caseSensitive)) ? false : res);\n}\n\nfunction getValidLine(options) {\n  var res, forceNext, limitMessage,\n    matches, histInput, args, resCheck;\n\n  function _getPhContent(param) { return getPhContent(param, options); }\n  function addDisplay(text) { options.display += (/[^\\r\\n]$/.test(options.display) ? '\\n' : '') + text; }\n\n  options.limitSrc = options.limit;\n  options.displaySrc = options.display;\n  options.limit = ''; // for readlineExt\n  options.display = replacePlaceholder(options.display + '', _getPhContent);\n\n  while (true) {\n    res = _readlineSync(options);\n    forceNext = false;\n    limitMessage = '';\n\n    if (options.defaultInput && !res) { res = options.defaultInput; }\n\n    if (options.history) {\n      if ((matches = /^\\s*!(?:!|-1)(:p)?\\s*$/.exec(res))) { // `!!` `!-1` +`:p`\n        histInput = inputHistory[0] || '';\n        if (matches[1]) { // only display\n          forceNext = true;\n        } else { // replace input\n          res = histInput;\n        }\n        // Show it even if it is empty (NL only).\n        addDisplay(histInput + '\\n');\n        if (!forceNext) { // Loop may break\n          options.displayOnly = true;\n          _readlineSync(options);\n          options.displayOnly = false;\n        }\n      } else if (res && res !== inputHistory[inputHistory.length - 1]) {\n        inputHistory = [res];\n      }\n    }\n\n    if (!forceNext && options.cd && res) {\n      args = parseCl(res);\n      switch (args[0].toLowerCase()) {\n        case 'cd':\n          if (args[1]) {\n            try {\n              process.chdir(replaceHomePath(args[1], true));\n            } catch (e) {\n              addDisplay(e + '');\n            }\n          }\n          forceNext = true;\n          break;\n        case 'pwd':\n          addDisplay(process.cwd());\n          forceNext = true;\n          break;\n        // no default\n      }\n    }\n\n    if (!forceNext && options.preCheck) {\n      resCheck = options.preCheck(res, options);\n      res = resCheck.res;\n      if (resCheck.forceNext) { forceNext = true; } // Don't switch to false.\n    }\n\n    if (!forceNext) {\n      if (!options.limitSrc.length ||\n        isMatched(res, options.limitSrc, options.caseSensitive)) { break; }\n      if (options.limitMessage) {\n        limitMessage = replacePlaceholder(options.limitMessage, _getPhContent);\n      }\n    }\n\n    addDisplay((limitMessage ? limitMessage + '\\n' : '') +\n      replacePlaceholder(options.displaySrc + '', _getPhContent));\n  }\n  return toBool(res, options);\n}\n\n// for dev\nexports._DBG_set_useExt = function(val) { _DBG_useExt = val; };\nexports._DBG_set_checkOptions = function(val) { _DBG_checkOptions = val; };\nexports._DBG_set_checkMethod = function(val) { _DBG_checkMethod = val; };\nexports._DBG_clearHistory = function() { lastInput = ''; inputHistory = []; };\n\n// ------------------------------------\n\nexports.setDefaultOptions = function(options) {\n  defaultOptions = margeOptions(true, options);\n  return margeOptions(true); // copy\n};\n\nexports.question = function(query, options) {\n  /* eslint-disable key-spacing */\n  return getValidLine(margeOptions(margeOptions(true, options), {\n    display:            query\n  }));\n  /* eslint-enable key-spacing */\n};\n\nexports.prompt = function(options) {\n  var readOptions = margeOptions(true, options);\n  readOptions.display = readOptions.prompt;\n  return getValidLine(readOptions);\n};\n\nexports.keyIn = function(query, options) {\n  /* eslint-disable key-spacing */\n  var readOptions = margeOptions(margeOptions(true, options), {\n    display:            query,\n    keyIn:              true,\n    keepWhitespace:     true\n  });\n  /* eslint-enable key-spacing */\n\n  // char list\n  readOptions.limitSrc = readOptions.limit.filter(function(value) {\n    var type = typeof value;\n    return type === 'string' || type === 'number';\n  }).map(function(text) {\n    return replacePlaceholder(text + '', getPhCharlist);\n  });\n  // pattern\n  readOptions.limit = escapePattern(readOptions.limitSrc.join(''));\n\n  ['trueValue', 'falseValue'].forEach(function(optionName) {\n    readOptions[optionName] = readOptions[optionName].reduce(function(comps, comp) {\n      var type = typeof comp;\n      if (type === 'string' || type === 'number') {\n        comps = comps.concat((comp + '').split(''));\n      } else { comps.push(comp); }\n      return comps;\n    }, []);\n  });\n\n  readOptions.display = replacePlaceholder(readOptions.display + '',\n    function(param) { return getPhContent(param, readOptions); });\n\n  return toBool(_readlineSync(readOptions), readOptions);\n};\n\n// ------------------------------------\n\nexports.questionEMail = function(query, options) {\n  if (query == null) { query = 'Input e-mail address: '; }\n  /* eslint-disable key-spacing */\n  return exports.question(query, margeOptions({\n    // -------- default\n    hideEchoBack:       false,\n    // http://www.w3.org/TR/html5/forms.html#valid-e-mail-address\n    limit:              /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,\n    limitMessage:       'Input valid e-mail address, please.',\n    trueValue:          null,\n    falseValue:         null\n  }, options, {\n    // -------- forced\n    keepWhitespace:     false,\n    cd:                 false\n  }));\n  /* eslint-enable key-spacing */\n};\n\nexports.questionNewPassword = function(query, options) {\n  /* eslint-disable key-spacing */\n  var resCharlist, min, max,\n    readOptions = margeOptions({\n      // -------- default\n      hideEchoBack:       true,\n      mask:               '*',\n      limitMessage:       'It can include: $<charlist>\\n' +\n                            'And the length must be: $<length>',\n      trueValue:          null,\n      falseValue:         null,\n      caseSensitive:      true\n    }, options, {\n      // -------- forced\n      history:            false,\n      cd:                 false,\n      // limit (by charlist etc.),\n      phContent: function(param) {\n        return param === 'charlist' ? resCharlist.text :\n          param === 'length' ? min + '...' + max : null;\n      }\n    }),\n    // added:     charlist, min, max, confirmMessage, unmatchMessage\n    charlist, confirmMessage, unmatchMessage,\n    limit, limitMessage, res1, res2;\n  /* eslint-enable key-spacing */\n  options = options || {};\n\n  charlist = replacePlaceholder(\n    options.charlist ? options.charlist + '' : '$<!-~>', getPhCharlist);\n  if (isNaN(min = parseInt(options.min, 10)) || typeof min !== 'number') { min = 12; }\n  if (isNaN(max = parseInt(options.max, 10)) || typeof max !== 'number') { max = 24; }\n  limit = new RegExp('^[' + escapePattern(charlist) +\n    ']{' + min + ',' + max + '}$');\n  resCharlist = array2charlist([charlist], readOptions.caseSensitive, true);\n  resCharlist.text = joinChunks(resCharlist.values, resCharlist.suppressed);\n\n  confirmMessage = options.confirmMessage != null ? options.confirmMessage :\n    'Reinput a same one to confirm it: ';\n  unmatchMessage = options.unmatchMessage != null ? options.unmatchMessage :\n    'It differs from first one.' +\n      ' Hit only the Enter key if you want to retry from first one.';\n\n  if (query == null) { query = 'Input new password: '; }\n\n  limitMessage = readOptions.limitMessage;\n  while (!res2) {\n    readOptions.limit = limit;\n    readOptions.limitMessage = limitMessage;\n    res1 = exports.question(query, readOptions);\n\n    readOptions.limit = [res1, ''];\n    readOptions.limitMessage = unmatchMessage;\n    res2 = exports.question(confirmMessage, readOptions);\n  }\n\n  return res1;\n};\n\nfunction _questionNum(query, options, parser) {\n  var validValue;\n  function getValidValue(value) {\n    validValue = parser(value);\n    return !isNaN(validValue) && typeof validValue === 'number';\n  }\n  /* eslint-disable key-spacing */\n  exports.question(query, margeOptions({\n    // -------- default\n    limitMessage:       'Input valid number, please.'\n  }, options, {\n    // -------- forced\n    limit:              getValidValue,\n    cd:                 false\n    // trueValue, falseValue, caseSensitive, keepWhitespace don't work.\n  }));\n  /* eslint-enable key-spacing */\n  return validValue;\n}\nexports.questionInt = function(query, options) {\n  return _questionNum(query, options, function(value) { return parseInt(value, 10); });\n};\nexports.questionFloat = function(query, options) {\n  return _questionNum(query, options, parseFloat);\n};\n\nexports.questionPath = function(query, options) {\n  /* eslint-disable key-spacing */\n  var error = '',\n    validPath, // before readOptions\n    readOptions = margeOptions({\n      // -------- default\n      hideEchoBack:       false,\n      limitMessage:       '$<error(\\n)>Input valid path, please.' +\n                            '$<( Min:)min>$<( Max:)max>',\n      history:            true,\n      cd:                 true\n    }, options, {\n      // -------- forced\n      keepWhitespace:     false,\n      limit: function(value) {\n        var exists, stat, res;\n        value = replaceHomePath(value, true);\n        error = ''; // for validate\n        // mkdir -p\n        function mkdirParents(dirPath) {\n          dirPath.split(/\\/|\\\\/).reduce(function(parents, dir) {\n            var path = pathUtil.resolve((parents += dir + pathUtil.sep));\n            if (!fs.existsSync(path)) {\n              fs.mkdirSync(path);\n            } else if (!fs.statSync(path).isDirectory()) {\n              throw new Error('Non directory already exists: ' + path);\n            }\n            return parents;\n          }, '');\n        }\n\n        try {\n          exists = fs.existsSync(value);\n          validPath = exists ? fs.realpathSync(value) : pathUtil.resolve(value);\n          // options.exists default: true, not-bool: no-check\n          if (!options.hasOwnProperty('exists') && !exists ||\n              typeof options.exists === 'boolean' && options.exists !== exists) {\n            error = (exists ? 'Already exists' : 'No such file or directory') +\n              ': ' + validPath;\n            return false;\n          }\n          if (!exists && options.create) {\n            if (options.isDirectory) {\n              mkdirParents(validPath);\n            } else {\n              mkdirParents(pathUtil.dirname(validPath));\n              fs.closeSync(fs.openSync(validPath, 'w')); // touch\n            }\n            validPath = fs.realpathSync(validPath);\n          }\n          if (exists && (options.min || options.max ||\n              options.isFile || options.isDirectory)) {\n            stat = fs.statSync(validPath);\n            // type check first (directory has zero size)\n            if (options.isFile && !stat.isFile()) {\n              error = 'Not file: ' + validPath;\n              return false;\n            } else if (options.isDirectory && !stat.isDirectory()) {\n              error = 'Not directory: ' + validPath;\n              return false;\n            } else if (options.min && stat.size < +options.min ||\n                options.max && stat.size > +options.max) {\n              error = 'Size ' + stat.size + ' is out of range: ' + validPath;\n              return false;\n            }\n          }\n          if (typeof options.validate === 'function' &&\n              (res = options.validate(validPath)) !== true) {\n            if (typeof res === 'string') { error = res; }\n            return false;\n          }\n        } catch (e) {\n          error = e + '';\n          return false;\n        }\n        return true;\n      },\n      // trueValue, falseValue, caseSensitive don't work.\n      phContent: function(param) {\n        return param === 'error' ? error :\n          param !== 'min' && param !== 'max' ? null :\n          options.hasOwnProperty(param) ? options[param] + '' : '';\n      }\n    });\n    // added:     exists, create, min, max, isFile, isDirectory, validate\n  /* eslint-enable key-spacing */\n  options = options || {};\n\n  if (query == null) { query = 'Input path (you can \"cd\" and \"pwd\"): '; }\n\n  exports.question(query, readOptions);\n  return validPath;\n};\n\n// props: preCheck, args, hRes, limit\nfunction getClHandler(commandHandler, options) {\n  var clHandler = {},\n    hIndex = {};\n  if (typeof commandHandler === 'object') {\n    Object.keys(commandHandler).forEach(function(cmd) {\n      if (typeof commandHandler[cmd] === 'function') {\n        hIndex[options.caseSensitive ? cmd : cmd.toLowerCase()] = commandHandler[cmd];\n      }\n    });\n    clHandler.preCheck = function(res) {\n      var cmdKey;\n      clHandler.args = parseCl(res);\n      cmdKey = clHandler.args[0] || '';\n      if (!options.caseSensitive) { cmdKey = cmdKey.toLowerCase(); }\n      clHandler.hRes =\n        cmdKey !== '_' && hIndex.hasOwnProperty(cmdKey)\n          ? hIndex[cmdKey].apply(res, clHandler.args.slice(1)) :\n          hIndex.hasOwnProperty('_') ? hIndex._.apply(res, clHandler.args) : null;\n      return {res: res, forceNext: false};\n    };\n    if (!hIndex.hasOwnProperty('_')) {\n      clHandler.limit = function() { // It's called after preCheck.\n        var cmdKey = clHandler.args[0] || '';\n        if (!options.caseSensitive) { cmdKey = cmdKey.toLowerCase(); }\n        return hIndex.hasOwnProperty(cmdKey);\n      };\n    }\n  } else {\n    clHandler.preCheck = function(res) {\n      clHandler.args = parseCl(res);\n      clHandler.hRes = typeof commandHandler === 'function'\n        ? commandHandler.apply(res, clHandler.args) : true; // true for break loop\n      return {res: res, forceNext: false};\n    };\n  }\n  return clHandler;\n}\n\nexports.promptCL = function(commandHandler, options) {\n  /* eslint-disable key-spacing */\n  var readOptions = margeOptions({\n      // -------- default\n      hideEchoBack:       false,\n      limitMessage:       'Requested command is not available.',\n      caseSensitive:      false,\n      history:            true\n    }, options),\n    //   -------- forced\n    //   trueValue, falseValue, keepWhitespace don't work.\n    //   preCheck, limit (by clHandler)\n    clHandler = getClHandler(commandHandler, readOptions);\n  /* eslint-enable key-spacing */\n  readOptions.limit = clHandler.limit;\n  readOptions.preCheck = clHandler.preCheck;\n  exports.prompt(readOptions);\n  return clHandler.args;\n};\n\nexports.promptLoop = function(inputHandler, options) {\n  /* eslint-disable key-spacing */\n  var readOptions = margeOptions({\n    // -------- default\n    hideEchoBack:       false,\n    trueValue:          null,\n    falseValue:         null,\n    caseSensitive:      false,\n    history:            true\n  }, options);\n  /* eslint-enable key-spacing */\n  while (true) { if (inputHandler(exports.prompt(readOptions))) { break; } }\n  // return; // nothing is returned\n};\n\nexports.promptCLLoop = function(commandHandler, options) {\n  /* eslint-disable key-spacing */\n  var readOptions = margeOptions({\n      // -------- default\n      hideEchoBack:       false,\n      limitMessage:       'Requested command is not available.',\n      caseSensitive:      false,\n      history:            true\n    }, options),\n    //   -------- forced\n    //   trueValue, falseValue, keepWhitespace don't work.\n    //   preCheck, limit (by clHandler)\n    clHandler = getClHandler(commandHandler, readOptions);\n  /* eslint-enable key-spacing */\n  readOptions.limit = clHandler.limit;\n  readOptions.preCheck = clHandler.preCheck;\n  while (true) {\n    exports.prompt(readOptions);\n    if (clHandler.hRes) { break; }\n  }\n  // return; // nothing is returned\n};\n\nexports.promptSimShell = function(options) {\n  /* eslint-disable key-spacing */\n  return exports.prompt(margeOptions({\n    // -------- default\n    hideEchoBack:       false,\n    history:            true\n  }, options, {\n    // -------- forced\n    prompt:             (function() {\n      return IS_WIN ? '$<cwd>>' :\n        // 'user@host:cwd$ '\n        (process.env.USER || '') +\n        (process.env.HOSTNAME ? '@' + process.env.HOSTNAME.replace(/\\..*$/, '') : '') +\n        ':$<cwdHome>$ ';\n    })()\n  }));\n  /* eslint-enable key-spacing */\n};\n\nfunction _keyInYN(query, options, limit) {\n  var res;\n  if (query == null) { query = 'Are you sure? '; }\n  if ((!options || options.guide !== false) && (query += '')) {\n    query = query.replace(/\\s*:?\\s*$/, '') + ' [y/n]: ';\n  }\n  /* eslint-disable key-spacing */\n  res = exports.keyIn(query, margeOptions(options, {\n    // -------- forced\n    hideEchoBack:       false,\n    limit:              limit,\n    trueValue:          'y',\n    falseValue:         'n',\n    caseSensitive:      false\n    // mask doesn't work.\n  }));\n  // added:     guide\n  /* eslint-enable key-spacing */\n  return typeof res === 'boolean' ? res : '';\n}\nexports.keyInYN = function(query, options) { return _keyInYN(query, options); };\nexports.keyInYNStrict = function(query, options) { return _keyInYN(query, options, 'yn'); };\n\nexports.keyInPause = function(query, options) {\n  if (query == null) { query = 'Continue...'; }\n  if ((!options || options.guide !== false) && (query += '')) {\n    query = query.replace(/\\s+$/, '') + ' (Hit any key)';\n  }\n  /* eslint-disable key-spacing */\n  exports.keyIn(query, margeOptions({\n    // -------- default\n    limit:              null\n  }, options, {\n    // -------- forced\n    hideEchoBack:       true,\n    mask:               ''\n  }));\n  // added:     guide\n  /* eslint-enable key-spacing */\n  // return; // nothing is returned\n};\n\nexports.keyInSelect = function(items, query, options) {\n  /* eslint-disable key-spacing */\n  var readOptions = margeOptions({\n      // -------- default\n      hideEchoBack:       false\n    }, options, {\n      // -------- forced\n      trueValue:          null,\n      falseValue:         null,\n      caseSensitive:      false,\n      // limit (by items),\n      phContent: function(param) {\n        return param === 'itemsCount' ? items.length + '' :\n          param === 'firstItem' ? (items[0] + '').trim() :\n          param === 'lastItem' ? (items[items.length - 1] + '').trim() : null;\n      }\n    }),\n    // added:     guide, cancel\n    keylist = '',\n    key2i = {},\n    charCode = 49 /* '1' */,\n    display = '\\n';\n  /* eslint-enable key-spacing */\n  if (!Array.isArray(items) || !items.length || items.length > 35) {\n    throw '`items` must be Array (max length: 35).';\n  }\n\n  items.forEach(function(item, i) {\n    var key = String.fromCharCode(charCode);\n    keylist += key;\n    key2i[key] = i;\n    display += '[' + key + '] ' + (item + '').trim() + '\\n';\n    charCode = charCode === 57 /* '9' */ ? 97 /* 'a' */ : charCode + 1;\n  });\n  if (!options || options.cancel !== false) {\n    keylist += '0';\n    key2i['0'] = -1;\n    display += '[0] ' +\n      (options && options.cancel != null && typeof options.cancel !== 'boolean'\n        ? (options.cancel + '').trim() : 'CANCEL') + '\\n';\n  }\n  readOptions.limit = keylist;\n  display += '\\n';\n\n  if (query == null) { query = 'Choose one from list: '; }\n  if ((query += '')) {\n    if (!options || options.guide !== false) {\n      query = query.replace(/\\s*:?\\s*$/, '') + ' [$<limit>]: ';\n    }\n    display += query;\n  }\n\n  return key2i[exports.keyIn(display, readOptions).toLowerCase()];\n};\n\nexports.getRawInput = function() { return rawInput; };\n\n// ======== DEPRECATED ========\nfunction _setOption(optionName, args) {\n  var options;\n  if (args.length) { options = {}; options[optionName] = args[0]; }\n  return exports.setDefaultOptions(options)[optionName];\n}\nexports.setPrint = function() { return _setOption('print', arguments); };\nexports.setPrompt = function() { return _setOption('prompt', arguments); };\nexports.setEncoding = function() { return _setOption('encoding', arguments); };\nexports.setMask = function() { return _setOption('mask', arguments); };\nexports.setBufferSize = function() { return _setOption('bufferSize', arguments); };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}